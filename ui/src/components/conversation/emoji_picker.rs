//! Emoji picker component for inserting emojis into messages.

use dioxus::prelude::*;

/// Emoji categories with their emojis
#[allow(dead_code)]
pub const EMOJI_CATEGORIES: &[(&str, &str, &[&str])] = &[
    (
        "smileys",
        "ğŸ˜€",
        &[
            "ğŸ˜€",
            "ğŸ˜ƒ",
            "ğŸ˜„",
            "ğŸ˜",
            "ğŸ˜†",
            "ğŸ˜…",
            "ğŸ¤£",
            "ğŸ˜‚",
            "ğŸ™‚",
            "ğŸ˜Š",
            "ğŸ˜‡",
            "ğŸ¥°",
            "ğŸ˜",
            "ğŸ¤©",
            "ğŸ˜˜",
            "ğŸ˜—",
            "ğŸ˜š",
            "ğŸ˜™",
            "ğŸ¥²",
            "ğŸ˜‹",
            "ğŸ˜›",
            "ğŸ˜œ",
            "ğŸ¤ª",
            "ğŸ˜",
            "ğŸ¤‘",
            "ğŸ¤—",
            "ğŸ¤­",
            "ğŸ¤«",
            "ğŸ¤”",
            "ğŸ¤",
            "ğŸ¤¨",
            "ğŸ˜",
            "ğŸ˜‘",
            "ğŸ˜¶",
            "ğŸ˜",
            "ğŸ˜’",
            "ğŸ™„",
            "ğŸ˜¬",
            "ğŸ˜®â€ğŸ’¨",
            "ğŸ¤¥",
            "ğŸ˜Œ",
            "ğŸ˜”",
            "ğŸ˜ª",
            "ğŸ¤¤",
            "ğŸ˜´",
            "ğŸ˜·",
            "ğŸ¤’",
            "ğŸ¤•",
            "ğŸ¤¢",
            "ğŸ¤®",
            "ğŸ¤§",
            "ğŸ¥µ",
            "ğŸ¥¶",
            "ğŸ¥´",
            "ğŸ˜µ",
            "ğŸ¤¯",
            "ğŸ¤ ",
            "ğŸ¥³",
            "ğŸ¥¸",
            "ğŸ˜",
            "ğŸ¤“",
            "ğŸ§",
            "ğŸ˜•",
            "ğŸ˜Ÿ",
            "ğŸ™",
            "ğŸ˜®",
            "ğŸ˜¯",
            "ğŸ˜²",
            "ğŸ˜³",
            "ğŸ¥º",
            "ğŸ˜¦",
            "ğŸ˜§",
            "ğŸ˜¨",
            "ğŸ˜°",
            "ğŸ˜¥",
            "ğŸ˜¢",
            "ğŸ˜­",
            "ğŸ˜±",
            "ğŸ˜–",
            "ğŸ˜£",
            "ğŸ˜",
            "ğŸ˜“",
            "ğŸ˜©",
            "ğŸ˜«",
            "ğŸ¥±",
            "ğŸ˜¤",
            "ğŸ˜¡",
            "ğŸ˜ ",
            "ğŸ¤¬",
            "ğŸ˜ˆ",
            "ğŸ‘¿",
            "ğŸ’€",
            "â˜ ï¸",
            "ğŸ’©",
            "ğŸ¤¡",
            "ğŸ‘¹",
            "ğŸ‘º",
            "ğŸ‘»",
            "ğŸ‘½",
            "ğŸ‘¾",
            "ğŸ¤–",
        ],
    ),
    (
        "gestures",
        "ğŸ‘‹",
        &[
            "ğŸ‘‹", "ğŸ¤š", "ğŸ–ï¸", "âœ‹", "ğŸ––", "ğŸ‘Œ", "ğŸ¤Œ", "ğŸ¤", "âœŒï¸", "ğŸ¤", "ğŸ¤Ÿ", "ğŸ¤˜", "ğŸ¤™", "ğŸ‘ˆ",
            "ğŸ‘‰", "ğŸ‘†", "ğŸ–•", "ğŸ‘‡", "â˜ï¸", "ğŸ‘", "ğŸ‘", "âœŠ", "ğŸ‘Š", "ğŸ¤›", "ğŸ¤œ", "ğŸ‘", "ğŸ™Œ", "ğŸ‘",
            "ğŸ¤²", "ğŸ¤", "ğŸ™", "âœï¸", "ğŸ’…", "ğŸ¤³", "ğŸ’ª", "ğŸ¦¾", "ğŸ¦¿", "ğŸ¦µ", "ğŸ¦¶", "ğŸ‘‚", "ğŸ¦»", "ğŸ‘ƒ",
            "ğŸ§ ", "ğŸ«€", "ğŸ«", "ğŸ¦·", "ğŸ¦´", "ğŸ‘€", "ğŸ‘ï¸", "ğŸ‘…", "ğŸ‘„", "ğŸ’‹",
        ],
    ),
    (
        "hearts",
        "â¤ï¸",
        &[
            "â¤ï¸", "ğŸ§¡", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ–¤", "ğŸ¤", "ğŸ¤", "ğŸ’”", "â£ï¸", "ğŸ’•", "ğŸ’", "ğŸ’“",
            "ğŸ’—", "ğŸ’–", "ğŸ’˜", "ğŸ’", "ğŸ’Ÿ", "â™¥ï¸", "ğŸ’Œ", "ğŸ’", "ğŸŒ¹", "ğŸ¥€", "ğŸŒ·",
        ],
    ),
    (
        "celebration",
        "ğŸ‰",
        &[
            "ğŸ‰", "ğŸŠ", "ğŸˆ", "ğŸ", "ğŸ€", "ğŸª…", "ğŸª†", "ğŸ‚", "ğŸ°", "ğŸ§", "ğŸ¥³", "ğŸ¥‚", "ğŸ¾", "âœ¨",
            "ğŸ†", "ğŸ‡", "ğŸ„", "ğŸƒ", "ğŸ—ï¸", "ğŸ†", "ğŸ¥‡", "ğŸ¥ˆ", "ğŸ¥‰", "ğŸ…", "ğŸ–ï¸", "ğŸ­", "ğŸª",
        ],
    ),
    (
        "animals",
        "ğŸ¶",
        &[
            "ğŸ¶",
            "ğŸ±",
            "ğŸ­",
            "ğŸ¹",
            "ğŸ°",
            "ğŸ¦Š",
            "ğŸ»",
            "ğŸ¼",
            "ğŸ»â€â„ï¸",
            "ğŸ¨",
            "ğŸ¯",
            "ğŸ¦",
            "ğŸ®",
            "ğŸ·",
            "ğŸ¸",
            "ğŸµ",
            "ğŸ™ˆ",
            "ğŸ™‰",
            "ğŸ™Š",
            "ğŸ”",
            "ğŸ§",
            "ğŸ¦",
            "ğŸ¤",
            "ğŸ¦†",
            "ğŸ¦…",
            "ğŸ¦‰",
            "ğŸ¦‡",
            "ğŸº",
            "ğŸ—",
            "ğŸ´",
            "ğŸ¦„",
            "ğŸ",
            "ğŸª±",
            "ğŸ›",
            "ğŸ¦‹",
            "ğŸŒ",
            "ğŸ",
            "ğŸœ",
            "ğŸª°",
            "ğŸª²",
            "ğŸª³",
            "ğŸ¦Ÿ",
            "ğŸ¦—",
            "ğŸ•·ï¸",
            "ğŸ¦‚",
            "ğŸ¢",
            "ğŸ",
            "ğŸ¦",
            "ğŸ¦–",
            "ğŸ¦•",
            "ğŸ™",
            "ğŸ¦‘",
            "ğŸ¦",
            "ğŸ¦",
            "ğŸ¦€",
            "ğŸ¡",
            "ğŸ ",
            "ğŸŸ",
            "ğŸ¬",
            "ğŸ³",
            "ğŸ‹",
            "ğŸ¦ˆ",
            "ğŸŠ",
        ],
    ),
    (
        "food",
        "ğŸ•",
        &[
            "ğŸ•", "ğŸ”", "ğŸŸ", "ğŸŒ­", "ğŸ¿", "ğŸ§‚", "ğŸ¥“", "ğŸ¥š", "ğŸ³", "ğŸ§‡", "ğŸ¥", "ğŸ§ˆ", "ğŸ", "ğŸ¥",
            "ğŸ¥–", "ğŸ¥¨", "ğŸ§€", "ğŸ¥—", "ğŸ¥™", "ğŸ¥ª", "ğŸŒ®", "ğŸŒ¯", "ğŸ«”", "ğŸ¥«", "ğŸ", "ğŸœ", "ğŸ²", "ğŸ›",
            "ğŸ£", "ğŸ±", "ğŸ¥Ÿ", "ğŸ¦ª", "ğŸ¤", "ğŸ™", "ğŸš", "ğŸ˜", "ğŸ¥", "ğŸ¥ ", "ğŸ¥®", "ğŸ¢", "ğŸ¡", "ğŸ§",
            "ğŸ¨", "ğŸ¦", "ğŸ¥§", "ğŸ§", "ğŸ°", "ğŸ‚", "ğŸ®", "ğŸ­", "ğŸ¬", "ğŸ«", "ğŸ©", "ğŸª", "ğŸŒ°", "ğŸ¥œ",
            "â˜•", "ğŸµ", "ğŸ§ƒ", "ğŸ¥¤", "ğŸ§‹", "ğŸ¶", "ğŸº", "ğŸ»", "ğŸ¥‚", "ğŸ·", "ğŸ¥ƒ", "ğŸ¸", "ğŸ¹", "ğŸ§‰",
            "ğŸ¾",
        ],
    ),
    (
        "objects",
        "ğŸ’¡",
        &[
            "ğŸ’¡", "ğŸ”¦", "ğŸ®", "ğŸ“±", "ğŸ’»", "ğŸ–¥ï¸", "ğŸ–¨ï¸", "âŒ¨ï¸", "ğŸ–±ï¸", "ğŸ–²ï¸", "ğŸ’½", "ğŸ’¾", "ğŸ’¿", "ğŸ“€",
            "ğŸ¥", "ğŸ“·", "ğŸ“¹", "ğŸ“¼", "ğŸ”", "ğŸ”", "ğŸ”¬", "ğŸ”­", "ğŸ“¡", "ğŸ’‰", "ğŸ©¸", "ğŸ’Š", "ğŸ©¹", "ğŸ©º",
            "ğŸšª", "ğŸ›—", "ğŸª", "ğŸªŸ", "ğŸ›ï¸", "ğŸ›‹ï¸", "ğŸª‘", "ğŸš½", "ğŸª ", "ğŸš¿", "ğŸ›", "ğŸª¤", "ğŸª’", "ğŸ§´",
            "ğŸ§·", "ğŸ§¹", "ğŸ§º", "ğŸ§»", "ğŸª£", "ğŸ§¼", "ğŸª¥", "ğŸ§½", "ğŸ§¯", "ğŸ›’", "ğŸš¬", "âš°ï¸", "ğŸª¦", "âš±ï¸",
            "ğŸ—¿", "ğŸª§", "ğŸ§",
        ],
    ),
    (
        "symbols",
        "âœ…",
        &[
            "âœ…", "âŒ", "â“", "â—", "â€¼ï¸", "â‰ï¸", "ğŸ’¯", "ğŸ”´", "ğŸŸ ", "ğŸŸ¡", "ğŸŸ¢", "ğŸ”µ", "ğŸŸ£", "âš«",
            "âšª", "ğŸŸ¤", "ğŸ”¶", "ğŸ”·", "ğŸ”¸", "ğŸ”¹", "ğŸ”º", "ğŸ”»", "ğŸ’ ", "ğŸ”˜", "ğŸ”³", "ğŸ”²", "ğŸ", "ğŸš©",
            "ğŸŒ", "ğŸ´", "ğŸ³ï¸", "â¬›", "â¬œ", "â—¼ï¸", "â—»ï¸", "â—¾", "â—½", "â–ªï¸", "â–«ï¸", "ğŸ”ˆ", "ğŸ”‡", "ğŸ”‰",
            "ğŸ”Š", "ğŸ””", "ğŸ”•", "ğŸ“£", "ğŸ“¢", "ğŸ’¬", "ğŸ’­", "ğŸ—¯ï¸", "â™ ï¸", "â™£ï¸", "â™¥ï¸", "â™¦ï¸", "ğŸƒ", "ğŸ´",
            "ğŸ€„",
        ],
    ),
];

/// Common/frequently used emojis (shown first) - 4x4 grid
pub const FREQUENT_EMOJIS: &[&str] = &[
    "ğŸ‘", "â¤ï¸", "ğŸ˜‚", "ğŸ‘€", "ğŸ”¥", "ğŸ˜®", "ğŸ˜¢", "ğŸ˜¡", "ğŸ‰", "ğŸ¤”", "ğŸ‘‹", "âœ…", "ğŸ’¯", "ğŸ™", "ğŸ˜", "ğŸ‘",
];

#[derive(Props, Clone, PartialEq)]
pub struct EmojiPickerProps {
    /// Called when an emoji is selected
    pub on_select: EventHandler<String>,
    /// Called when the picker should close
    pub on_close: EventHandler<()>,
}

/// Simple emoji picker with a 4x4 grid of popular emojis
#[component]
pub fn EmojiPicker(props: EmojiPickerProps) -> Element {
    rsx! {
        div {
            class: "bg-panel rounded-lg shadow-lg border border-border p-1.5",
            // Prevent clicks inside from bubbling
            onclick: move |e| e.stop_propagation(),

            // 4x4 emoji grid with tight spacing
            div {
                class: "grid",
                style: "grid-template-columns: repeat(4, 1fr); gap: 2px;",
                for emoji in FREQUENT_EMOJIS.iter() {
                    {render_emoji_button(emoji, &props.on_select, &props.on_close)}
                }
            }
        }
    }
}

fn render_emoji_button(
    emoji: &str,
    on_select: &EventHandler<String>,
    on_close: &EventHandler<()>,
) -> Element {
    let emoji_str = emoji.to_string();
    let on_select = *on_select;
    let on_close = *on_close;

    rsx! {
        button {
            key: "{emoji}",
            class: "p-1 rounded hover:bg-surface transition-colors text-xl leading-none",
            onclick: move |_| {
                on_select.call(emoji_str.clone());
                on_close.call(());
            },
            "{emoji}"
        }
    }
}
